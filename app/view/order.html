<div ng-controller="orderCtrl">
  <!-- Header do Pedido -->
  <div ng-show="!selectionCustomer" >
      <div class="page-header" style="margin-top:-50px; display:none;">
      <h1>ADS Móveis</h1>
          Rua Braz Izzo, 435, Jd. José R. Pires - Marialva - PR<br />
          Fone: [44] 3232-3530 | Cel.: [44] 8806-9398 | [44]9918-4750<br />
          E-mail: ads@adsmóveis.com.br - www.adsmoveis.com.br<br />
      </div>
      <div class="panel panel-default">
          <div class="panel-heading">
              <span class="panel-title">PEDIDO</span>
              <span style="margin-left: 40px;">Nº : {{pedido.id}}</span>
              <span style="margin-left: 40px;">DATA : {{pedido.date_register | date:"dd-MM-yyyy"}}</span>
              <span style="margin-left: 40px;">STATUS : {{pedido.status}}</span>
          </div>
          <div class="panel-body">

              <span><b>CLIENTE: {{pedido.firstName + " " + pedido.lastName | uppercase}}</b></span><br>
              <span>ENDEREÇO: {{pedido.address  + ", " + pedido.number
                  + ", " + pedido.neighborhood + ", " + pedido.city
                  + " - " + pedido.state | uppercase}} </span><br>
              <span>CONTATOS: {{pedido.phone + " || " + pedido.celphone +" || " + pedido.email | uppercase}} </span><br>
              <button class="btn btn-default" ng-click="addCustomer()">{{addOrUpdate}}</button>
          </div>
      </div>

      <!-- Ambientes -->
      <div id="ambientes"  ng-controller ="environmentCtrl" class="clearfix">
          <button class="btn btn-default" ng-click="addEnvironment(pedido.id)">Add Ambiente</button>
          <div class="panel panel-default" ng-repeat="environment in environments">
              <div class="panel-heading">
                  <span class="panel-title" ng-hide="environment.id === editEnvId">{{environment.name}}</span>
                  <input type="text" ng-model="environment.name" ng-show="environment.id === editEnvId" ng-blur="changedNameEnv(environment)">
                  <button class=" btn btn-xs btn-danger glyphicon
                  glyphicon-remove pull-right" ng-click="delEnvironment(environment)"></button>
                  <button class=" btn btn-xs btn-default glyphicon
                  glyphicon-edit pull-right"
                  ng-click="showInputEditEnv(environment.id)"></button>
              </div>
              <div class="panel-body">
                  <table class="table table-condensed tabled-hover">
                      <thead>
                          <tr>
                              <th width="10%">Qtd</th>
                              <th width="40%">Descrição</th>
                              <th width="20%">Vlr. Unitário</th>
                              <th width="20%">Vlr. total</th>
                              <th width="10%"></th>
                          </tr>
                      </thead>
                      <tbody>
                          <tr ng-repeat="prod in environment.products">
                              <td>{{prod.qtd}}</td>
                              <td>{{prod.description}}</td>
                              <td>{{prod.value | currency:'R$ '}}</td>
                              <td>{{prod.qtd * prod.value | currency:'R$ '}}</td>
                              <td></td>
                          </tr>
                          <tr>
                              <td><input class="form-control" type="text" name="qtd" maxlength="5" ng-model="item.qtd" value=""></td>
                              <td><input class="form-control" type="text" ng-model="item.description"></td>
                              <td><input class="form-control" type="text" ng-model="item.value" ></td>
                              <td><button class="btn btn-default" ng-click="addProduct(environment.id, item)">Add</button></td>
                              <td></td>
                          </tr>
                      </tbody>
                  </table>
              </div>
          </div>
          <!-- fim ambientes -->
      </div>

      <!-- Pagamento -->
      <div class="panel panel-default">
          <div class="panel-heading">
              <span class="panel-title">PAGAMENTO</span>
          </div>
          <div class="panel-body">

          </div>
      </div>
      <!-- fim Pagamento -->
  </div>


  <!-- Customer Selection -->
  <div id="customer-selection" ng-show="selectionCustomer">
      <h3>Selecione o Cliente</h3>
      <div class="input-group">
          <span class="input-group-addon">
              <span class="glyphicon glyphicon-search"></span>
          </span>
        <input type="text" class="form-control" ng-model="search.firstName">
       </div>
       <table class="table table-condensed table-hover">
           <thead>
               <th width="60%">Nome</th>
               <th width="20%">Telefone</th>
               <th width="20%">Celular</th>
           </thead>
           <tbody>
               <tr ng-repeat="customer in customers track by $index | filter:search:strict | orderBy:'firstName'">
                   <td><a href="" ng-click="selectCustomer(customer)">{{ customer.firstName }} {{ customer.lastName }}</a></td>
                   <td>{{customer.phone}}</td>
                   <td>{{customer.celphone}}</td>
               </tr>
           </tbody>
       </table>
  </div>
</div>
